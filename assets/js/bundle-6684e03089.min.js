!function i(u,a,c){function s(t,e){if(!a[t]){if(!u[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};u[t][0].call(o.exports,function(e){return s(u[t][1][e]||e)},o,o.exports,i,u,a,c)}return a[t].exports}for(var f="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,p=(r=e("../common/js/CindyApp.js"))&&r.__esModule?r:{default:r};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,i,u){try{var a=e[i](u),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(i){var u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,o=a(i);return t=u?(e=a(this).constructor,Reflect.construct(o,arguments,e)):o.apply(this,arguments),n=this,!(r=t)||"object"!==y(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,p["default"]);var e,t,n,a,r,o=f(i);function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,Object.assign(i.defaultConfig,e))}return e=i,t=[{key:"_initCindyArgs",value:(a=regeneratorRuntime.mark(function e(){var t,a,n,r,o,i,c,u,s,f,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f=function(u){var a=c.map(function(e){return e.length});return new Array(u).fill(0).map(function(e,t){var n=Math.floor(t*c.length/u),r=c[n];if(0<a[n]){var o=Math.floor(Math.random()*a[n]),i=r[o];return r[o]=r[a[n]-1],r[a[n]-1]=i,a[n]--,i}if(0===c.length)throw new Error("Space Rescue level set is empty");return r[Math.floor(Math.random()*r.length)]})},s=function(e){for(var t=[],n=[1,1],r=e.split("\n"),o=0;o<r.length;o++)for(var i=0;i<r[o].length;i++){var u=r[i][o];"o"===u?t.push([i+1,a-o]):"S"===u&&(n=[i+1,a-o])}return[n].concat(t)},u=function(e){return"number"==typeof e?{ctype:"number",value:{real:e,imag:0}}:"object"===y(e)&&void 0!==e.length?{ctype:"list",value:e.map(u)}:void 0},t=function(e){return"app/".concat(e)},a=7,n=["beginner-1","beginner-2","easy-1","easy-2","medium-1","medium-2","hard","extreme"].map(function(e){return t("levels/".concat(e,".txt"))}),e.next=8,Promise.all(n.map(function(e){return p.default.request({url:e})}));case 8:return r=e.sent,o=/([\.oS]{7}\n){6}([\.oS]{7})/g,i=function(e){return e.match(o)},c=r.map(i),CindyJS.registerPlugin(1,"spacelevels",function(r){r.defineFunction("getshuffledlevels",1,function(e){var t=0|r.evaluate(e[0]).value.real,n=f(t);return u(n.map(function(e){return s(e)}))}),r.defineFunction("getshuffledlevels",0,function(e){var t=f(l.config.numLevels);return u(t.map(function(e){return s(e)}))})}),this.canvas.style.backgroundImage="url('".concat(t("img/background.jpg"),"')"),this.canvas.style.backgroundSize="cover",e.next=18,p.default.loadScripts(t("Space_"),["init","draw","mousedown","mouseup"],".cs");case 18:return e.t0=e.sent,e.t1=[{name:"P0",type:"Free",pos:[a+1.7,2.5],pinned:!0,color:[1,0,0],visible:!1},{name:"P1",type:"Free",pos:[a+1.7,a+.5],pinned:!0,color:[1,0,0],visible:!1},{name:"seg",type:"Segment",args:["P0","P1"],pos:[1,0,0],size:3,color:[1,1,1]},{name:"P2",type:"PointOnSegment",args:["seg"],pos:[a+2,1.2],narrow:100,size:11,color:[1,1,1]}],e.t2=[{element:this.canvas,virtualheight:750,virtualwidth:1e3,transform:[{visibleRect:[.2,a+1.3,a+2.6,-.3]}]}],e.t3={target:t("img/target.png"),o1:t("img/o1.png"),o2:t("img/o2.png"),o3:t("img/o3.png"),o4:t("img/o4.png"),o5:t("img/o5.png"),o6:t("img/o6.png"),o7:t("img/o7.png"),o8:t("img/o8.png"),o9:t("img/o9.png"),o10:t("img/o10.png"),selected:t("img/selected.png")},e.t4=[],e.t5=["spacelevels"],e.abrupt("return",{scripts:e.t0,geometry:e.t1,ports:e.t2,images:e.t3,autoplay:!0,behavior:e.t4,use:e.t5});case 25:case"end":return e.stop()}},e,this)}),r=function(){var e=this,u=arguments;return new Promise(function(t,n){var r=a.apply(e,u);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})},function(){return r.apply(this,arguments)})}],n=[{key:"defaultConfig",get:function(){return{appName:"Space Rescue",appDescription:"Die Astronautin und die Robosatelliten können im Weltall jeweils so weit nach oben, rechts, unten oder links fliegen, bis sie aneinander stoßen. Wie kann die Astronautin in ihr Raumschiff gelangen?",appCredits:"Level & Implemtierung: Aaron Montag. Spielidee inspiriert von Hiroshi Yamamoto.",pauseScript:"",resumeScript:"",numLevels:10}}}],t&&u(e.prototype,t),n&&u(e,n),i}();n.default=o},{"../common/js/CindyApp.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,f=(r=e("./application.js"))&&r.__esModule?r:{default:r};function l(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r,o,i,u){try{var a=e[i](u),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function y(a){return function(){var e=this,u=arguments;return new Promise(function(t,n){var r=a.apply(e,u);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(i){var u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,o=b(i);return t=u?(e=b(this).constructor,Reflect.construct(o,arguments,e)):o.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(s,f["default"]);var e,t,n,r,o,i,u,a,c=m(s);function s(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=c.call(this,Object.assign(s.defaultConfig,n)),console.log("CindyApp called"),t._isCindyPaused=!1,t._cindy=null;var r=t.cindyArgs;return t._cindyAppReadyPromise=v((e=g(t),b(s.prototype)),"ready",e).then(function(){return s.waitForDomInsertion(t.canvas,document.body)}).then(y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.assert(0!==t.canvas.clientWidth,"canvas has 0 clientWidth"),console.assert(0!==t.canvas.clientHeight,"canvas has 0 clientHeight"),e.t0=CindyJS,e.next=5,r;case 5:return e.t1=e.sent,t._cindy=e.t0.newInstance.call(e.t0,e.t1),t._cindy.startup(),e.abrupt("return",g(t));case 9:case"end":return e.stop()}},e)}))),t._cindyPromise=t._cindyAppReadyPromise.then(function(){return t._cindy}),t}return e=s,t=[{key:"_initCindyArgs",value:(a=y(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Unimplemented. Must be implemented in subclass ".concat(this.constructor.name,"."));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"pause",value:function(){v(b(s.prototype),"pause",this).call(this),this._isReady&&(this.cindy.pause(),this._isCindyPaused=!0,this.cindy.evokeCS(this.config.pauseScript))}},{key:"resume",value:function(){v(b(s.prototype),"resume",this).call(this),this._isReady&&(this.cindy.play(),this._isCindyPaused=!1,this.cindy.evokeCS(this.config.resumeScript))}},{key:"reset",value:function(){v(b(s.prototype),"reset",this).call(this),this._isReady&&(this.cindy.stop(),this._isCindyPaused||this.cindy.play(),this.cindy.evokeCS(this.config.resetScript))}},{key:"canvas",get:function(){return void 0===this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=1560,this._canvas.height=1170),this._canvas}},{key:"cindyReady",get:function(){return this._cindyPromise}},{key:"cindy",get:function(){return this._cindy}},{key:"cindyArgs",get:function(){return void 0===this._cindyArgs&&(this._cindyArgs=this._initCindyArgs()),this._cindyArgs}},{key:"ready",get:function(){return this._cindyAppReadyPromise}},{key:"domElement",get:function(){return this.canvas}}],n=[{key:"retrieveConfigOverridesJsonByClass",value:(u=y(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(this.name+"Overrides.json",t).href,e.next=3,s.request({url:n});case 3:if("string"==typeof(r=e.sent))return e.abrupt("return",JSON.parse(r));e.next=8;break;case 8:if("object"===p(r))return e.abrupt("return",r);e.next=12;break;case 12:throw new Error("Error processing config override file ".concat(n));case 13:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"request",value:(i=y(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var n=new XMLHttpRequest;n.open(r.method||"GET",r.url),r.headers&&Object.keys(r.headers).forEach(function(e){n.setRequestHeader(e,r.headers[e])}),n.onload=function(){200<=n.status&&n.status<300?e(n.response):t(n)},n.onerror=function(){return t(n)},n.send(r.body)}));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"loadScripts",value:(o=y(regeneratorRuntime.mark(function e(n,t,r){var o,i,u,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o={},i=[],u=l(t);try{for(c=function(){var t=a.value;i.push(s.request({url:n+t+r}).then(function(e){return o[t]=e}))},u.s();!(a=u.n()).done;)c()}catch(e){u.e(e)}finally{u.f()}return e.next=6,Promise.all(i);case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}},e)})),function(e,t,n){return o.apply(this,arguments)})},{key:"waitForDomInsertion",value:(r=y(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var t;null===n.parentElement?(t=new MutationObserver(function(){r.contains(n)&&(t.disconnect(),e())})).observe(r,{childList:!0,subtree:!0}):e()}));case 1:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})},{key:"defaultConfig",get:function(){return{appName:"CindyJS app",pauseScript:"pause();",resumeScript:"resume();",resetScript:"reset();"}}}],t&&d(e.prototype,t),n&&d(e,n),s}();n.default=o},{"./application.js":3}],3:[function(e,t,n){"use strict";function c(e,t,n,r,o,i,u){try{var a=e[i](u),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function u(a){return function(){var e=this,u=arguments;return new Promise(function(t,n){var r=a.apply(e,u);function o(e){c(r,t,n,o,i,"next",e)}function i(e){c(r,t,n,o,i,"throw",e)}o(void 0)})}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s={},r=function(){function n(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._config=Object.assign(n.defaultConfig,t),this._applicationReadyPromise=Promise.resolve(),this._isReady=!1,Promise.resolve().then(function(){return e.ready.then(function(){return e._isReady=!0})})}var e,t,r,o,i;return e=n,t=[{key:"pause",value:function(){this.isReady?console.log("pausing ".concat(this.constructor.name)):console.log("pausing ".concat(this.constructor.name," failed, because app is not ready yet"))}},{key:"resume",value:function(){this.isReady?console.log("resuming ".concat(this.constructor.name)):console.log("resuming ".concat(this.constructor.name," failed, because app is not ready yet"))}},{key:"reset",value:function(){this.isReady?console.log("resetting ".concat(this.constructor.name)):console.log("resetting ".concat(this.constructor.name," failed, because app is not ready yet"))}},{key:"restart",value:function(e){this.reset(),e?this.pause():this.resume()}},{key:"isReady",get:function(){return this._isReady}},{key:"ready",get:function(){return this._applicationReadyPromise}},{key:"domElement",get:function(){return void 0===this._domElement&&(this._domElement=document.createElement("div")),this._domElement}},{key:"config",get:function(){return this._config}},{key:"name",get:function(){return this._config.appName}},{key:"description",get:function(){return this._config.appDescription}},{key:"credits",get:function(){return this._config.appCredits}}],r=[{key:"retrieveConfigOverrides",value:(i=u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve([]));case 1:case"end":return e.stop()}},e)})),function(){return i.apply(this,arguments)})},{key:"getConfigOverrides",value:(o=u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s[this.name]&&(s[this.name]=this.retrieveConfigOverrides()),e.abrupt("return",s[this.name]);case 2:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"defaultConfig",get:function(){return{appName:"App name",appDescription:"",appCredits:""}}}],t&&a(e.prototype,t),r&&a(e,r),n}();n.default=r},{}],4:[function(e,t,n){"use strict";var r,o=(r=e("../../app/SpaceApp"))&&r.__esModule?r:{default:r};$("[data-component=game]").each(function(e,t){var n=new o.default;$(t).append(n.domElement)})},{"../../app/SpaceApp":1}]},{},[4]);
//# sourceMappingURL=bundle-6684e03089.min.js.map
